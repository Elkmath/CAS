<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Comparison Tool</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f8f9fa; min-height: 100vh; padding: 20px; color: #333; }
        .container { max-width: 800px; margin: 0 auto; background: white; border-radius: 10px; padding: 40px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); }
        .header { text-align: center; margin-bottom: 40px; }
        .header h1 { font-size: 2rem; font-weight: 600; color: #333; }
        .input-section { margin-bottom: 30px; }
        .input-group { margin-bottom: 20px; }
        .input-group label { display: block; font-weight: 500; margin-bottom: 8px; color: #555; font-size: 0.9rem; }
        .input-group textarea { width: 100%; min-height: 100px; padding: 12px; border: 2px solid #ddd; border-radius: 8px; resize: none; font-size: 14px; font-family: inherit; transition: border-color 0.3s ease; background: white; overflow: hidden; }
        .input-group textarea:focus { outline: none; border-color: #007bff; }
        .input-group textarea::placeholder { color: rgba(0, 0, 0, 0.4); opacity: 1; }
        .input-group textarea:focus::placeholder { opacity: 0; }
        .button-container { text-align: center; margin-bottom: 30px; }
        .compare-btn { background: transparent; color: #333; border: 2px solid #ddd; padding: 12px 30px; font-size: 1rem; font-weight: 500; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; }
        .compare-btn:hover { border-color: #28a745; color: #28a745; box-shadow: 0 0 15px rgba(40, 167, 69, 0.3); }
        .compare-btn:active { transform: translateY(1px); }
        .results-section { margin-top: 30px; }
        .result-group { margin-bottom: 25px; }
        .result-group h3 { margin-bottom: 10px; color: #555; font-size: 1rem; font-weight: 500; }
        .result-text { line-height: 1.8; font-size: 16px; min-height: 80px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #e9ecef; }
        .sentence-item { 
            margin-bottom: 15px; 
            padding-bottom: 12px; 
            position: relative;
            display: flex;
            align-items: flex-start;
        }
        .sentence-item:last-child { 
            margin-bottom: 0; 
            padding-bottom: 0; 
        }
        .sentence-item:not(:last-child)::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background-color: #bbb;
            border-radius: 1px;
        }
        .sentence-number { 
            color: #666; 
            font-weight: 600; 
            margin-right: 8px; 
            font-size: 14px;
            flex-shrink: 0;
        }
        .sentence-content { 
            flex: 1;
            position: relative;
        }
        .highlight-1, .highlight-2, .highlight-3, .highlight-4, .highlight-5, .highlight-6, .highlight-7, .highlight-8 { 
            background-color: #dc3545; 
            color: white; 
            padding: 1px 4px; 
            border-radius: 3px; 
            cursor: pointer; 
            transition: all 0.3s ease; 
        }
        .highlight-glow { 
            background-color: #ff4757 !important; 
            box-shadow: 0 0 10px rgba(255, 71, 87, 0.6); 
            transform: scale(1.05); 
        }
        @media (max-width: 768px) { 
            .container { padding: 20px; } 
            .header h1 { font-size: 1.5rem; } 
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>English Comparison Tool</h1>
        </div>
        <div class="input-section">
            <div class="input-group">
                <label for="text1">첫 번째 텍스트</label>
                <textarea id="text1" placeholder="텍스트를 입력해주세요"></textarea>
            </div>
            <div class="input-group">
                <label for="text2">두 번째 텍스트</label>
                <textarea id="text2" placeholder="텍스트를 입력해주세요"></textarea>
            </div>
        </div>
        <div class="button-container">
            <button class="compare-btn" onclick="compareTexts()">텍스트 비교하기</button>
        </div>
        <div class="results-section" id="r" style="display: none;">
            <div class="result-group">
                <h3>첫 번째 텍스트</h3>
                <div class="result-text" id="r1"></div>
            </div>
            <div class="result-group">
                <h3>두 번째 텍스트</h3>
                <div class="result-text" id="r2"></div>
            </div>
        </div>
    </div>

    <script>
        function compareTexts() {
            const a = document.getElementById('text1').value.trim();
            const b = document.getElementById('text2').value.trim();
            if (!a || !b) { alert('두 텍스트를 모두 입력해주세요!'); return; }
            const x = a.split(/\s+/), y = b.split(/\s+/);
            const d = calcDiff(x, y);
            displayResults(d);
            document.getElementById('r').style.display = 'block';
        }

        function calcDiff(x, y) {
            const m = x.length, n = y.length;
            const l = Array(m + 1).fill().map(() => Array(n + 1).fill(0));
            for (let i = 1; i <= m; i++) {
                for (let j = 1; j <= n; j++) {
                    if (x[i-1] === y[j-1]) l[i][j] = l[i-1][j-1] + 1;
                    else l[i][j] = Math.max(l[i-1][j], l[i][j-1]);
                }
            }
            const p = [], q = [];
            let i = m, j = n, c = 1;
            while (i > 0 || j > 0) {
                if (i > 0 && j > 0 && x[i-1] === y[j-1]) {
                    p.unshift({w: x[i-1], t: 'same'});
                    q.unshift({w: y[j-1], t: 'same'});
                    i--; j--;
                } else if (i > 0 && (j === 0 || l[i-1][j] >= l[i][j-1])) {
                    p.unshift({w: x[i-1], t: 'diff', c});
                    i--;
                } else {
                    q.unshift({w: y[j-1], t: 'diff', c});
                    j--;
                }
                if (i > 0 && j > 0 && x[i-1] !== y[j-1]) c = (c % 8) + 1;
            }
            return {p, q};
        }

        function splitIntoSentences(w) {
            const s = [];
            let cur = [];
            
            w.forEach(word => {
                if (word.w && word.w.match(/[.!?]$/)) {
                    const clean = {...word, w: word.w.replace(/[.!?]$/, '')};
                    cur.push(clean);
                    s.push([...cur]);
                    cur = [];
                } else {
                    cur.push(word);
                }
            });
            
            if (cur.length > 0) {
                s.push(cur);
            }
            
            return s;
        }

        function displayResults(d) {
            const e1 = document.getElementById('r1'), e2 = document.getElementById('r2');
            
            const s1 = splitIntoSentences(d.p);
            const s2 = splitIntoSentences(d.q);
            
            let h1 = '', h2 = '';
            
            let idx1 = 0;
            s1.forEach((sent, si) => {
                h1 += `<div class="sentence-item">`;
                h1 += `<span class="sentence-number">${si + 1}.</span>`;
                h1 += `<span class="sentence-content">`;
                
                let inH = false;
                let g = -1;
                
                sent.forEach((item, wi) => {
                    if (item.t === 'same') {
                        if (inH) { h1 += '</span> '; inH = false; }
                        h1 += item.w + ' ';
                    } else {
                        if (!inH) { 
                            g = idx1;
                            h1 += `<span class="highlight-1" data-group="${g}">`;  
                            inH = true; 
                        }
                        h1 += item.w;
                        if (wi === sent.length - 1 || sent[wi + 1].t === 'same') { 
                            h1 += '</span> '; 
                            inH = false; 
                            idx1++;
                        } else h1 += ' ';
                    }
                });
                
                h1 += `</span></div>`;
            });
            
            let idx2 = 0;
            s2.forEach((sent, si) => {
                h2 += `<div class="sentence-item">`;
                h2 += `<span class="sentence-number">${si + 1}.</span>`;
                h2 += `<span class="sentence-content">`;
                
                let inH = false;
                let g = -1;
                
                sent.forEach((item, wi) => {
                    if (item.t === 'same') {
                        if (inH) { h2 += '</span> '; inH = false; }
                        h2 += item.w + ' ';
                    } else {
                        if (!inH) { 
                            g = idx2;
                            h2 += `<span class="highlight-1" data-group="${g}">`;  
                            inH = true; 
                        }
                        h2 += item.w;
                        if (wi === sent.length - 1 || sent[wi + 1].t === 'same') { 
                            h2 += '</span> '; 
                            inH = false; 
                            idx2++;
                        } else h2 += ' ';
                    }
                });
                
                h2 += `</span></div>`;
            });
            
            e1.innerHTML = h1; 
            e2.innerHTML = h2;
            addHover();
        }

        function addHover() {
            document.querySelectorAll('[class*="highlight-"]').forEach(h => {
                h.addEventListener('mouseenter', function() {
                    document.querySelectorAll(`[data-group="${this.getAttribute('data-group')}"]`).forEach(sg => sg.classList.add('highlight-glow'));
                });
                h.addEventListener('mouseleave', function() {
                    document.querySelectorAll(`[data-group="${this.getAttribute('data-group')}"]`).forEach(sg => sg.classList.remove('highlight-glow'));
                });
            });
        }

        function autoResize(ta) { ta.style.height = 'auto'; ta.style.height = Math.max(100, ta.scrollHeight) + 'px'; }
        document.getElementById('text1').addEventListener('input', function() { autoResize(this); });
        document.getElementById('text2').addEventListener('input', function() { autoResize(this); });
        document.getElementById('text1').addEventListener('keydown', function(e) { if (e.key === 'Enter' && e.ctrlKey) compareTexts(); });
        document.getElementById('text2').addEventListener('keydown', function(e) { if (e.key === 'Enter' && e.ctrlKey) compareTexts(); });
    </script>
</body>
</html>

